<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CookIT</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <a class="navbar-brand" href="#">CookIT</a>
</nav>

<div class="container my-4">
    <h1 class="text-center">Find Recipes With Your Ingredients!</h1>
    
    <div class="form-group">
        <label for="ingredients">Enter Ingredients (comma-separated):</label>
        <input type="text" class="form-control" id="ingredients" placeholder="e.g., eggs, flour, sugar">
    </div>
    <button class="btn btn-success btn-block" onclick="findRecipes()">Find Recipes</button>

    <!-- Recipe Results -->
    <div id="recipeResults" class="mt-4"></div>
</div>

<!-- Recipe Card Template -->
<div class="card mt-3 d-none" id="recipeCardTemplate">
    <div class="card-body">
        <h5 class="card-title">Recipe Name</h5>
        <p class="card-text">Instructions: Make the dish using the listed ingredients!</p>
        <p class="card-text"><strong>Missing Ingredients:</strong> <span class="missing-ingredients">None</span></p>
        <button class="btn btn-secondary btn-sm" onclick="showSubstitutes(this)">Show Substitutes</button>
        <div class="substitute-options mt-3 d-none">
            <p><strong>Substitute Ideas:</strong></p>
            <ul class="list-group"></ul>
        </div>
    </div>
</div>

<footer class="bg-light text-center py-3 mt-5">
    <p>&copy; 2025 CookIT. Find Recipes Easily! üç≥</p>
</footer>

<script>
    function findRecipes() {
        const input = document.getElementById('ingredients').value.trim();
        if (input === '') {
            alert("Please enter some ingredients!");
            return;
        }

        const userIngredients = input.toLowerCase().split(',').map(item => item.trim());

        // Mock recipe data (Replace with real API fetch)
        const recipes = [
            {
                name: "Pancakes",
                instructions: "Mix ingredients and cook on a pan.",
                ingredients: ["flour", "milk", "eggs", "sugar"],
                substitutes: { "milk": "Almond Milk", "butter": "Margarine" }
            },
            {
                name: "Cake",
                instructions: "Mix ingredients and bake at 350¬∞F for 30 minutes.",
                ingredients: ["flour", "sugar", "butter", "eggs"],
                substitutes: { "eggs": "Applesauce", "butter": "Coconut Oil" }
            },
            {
                name: "Omelette",
                instructions: "Whisk eggs, cook in a pan, and add veggies or cheese.",
                ingredients: ["eggs", "cheese", "tomato"],
                substitutes: { "cheese": "Nutritional Yeast" }
            }
        ];

        const resultsDiv = document.getElementById('recipeResults');
        resultsDiv.innerHTML = '';

        recipes.forEach(recipe => {
            const missing = recipe.ingredients.filter(item => !userIngredients.includes(item));
            const missingText = missing.length ? missing.join(', ') : "None";

            const cardTemplate = document.getElementById('recipeCardTemplate');
            const cardClone = cardTemplate.cloneNode(true);
            cardClone.classList.remove('d-none');

            cardClone.querySelector('.card-title').textContent = recipe.name;
            cardClone.querySelector('.card-text').textContent = `Instructions: ${recipe.instructions}`;
            cardClone.querySelector('.missing-ingredients').textContent = missingText;

            const substituteList = cardClone.querySelector('.list-group');
            substituteList.innerHTML = '';
            missing.forEach(miss => {
                if (recipe.substitutes[miss]) {
                    const listItem = document.createElement('li');
                    listItem.classList.add('list-group-item');
                    listItem.textContent = `${miss} ‚û°Ô∏è ${recipe.substitutes[miss]}`;
                    substituteList.appendChild(listItem);
                }
            });

            resultsDiv.appendChild(cardClone);
        });
    }

    function showSubstitutes(button) {
        const substituteSection = button.closest('.card-body').querySelector('.substitute-options');
        substituteSection.classList.toggle('d-none');
    }
</script>

</body>
